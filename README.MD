# 虎码字根练习

一个离线、单页的虎码字根练习器。页面只显示字根与两码输入框，键入正确即进入下一题，错误则提示正确代码并可重打。

## 运行方式

- 直接打开 `index.html` 即可运行（纯静态页面，不需要构建或服务端）。
- `fonts/` 必须与 `index.html` 同级，否则部分字根会变成乱码或方框。

## 练习规则

- 页面显示一个字根，用户用英文输入法输入两码。
- 正确：直接进入下一题。
- 错误：显示正确代码、输入框标红、可继续重打。
- 空格等同于“输错”。

## 模式说明

### 字根模式

- **全字根**：显示全部变体。
- **归并字根**：将变体合并为一组。
- 切换时会保留进度：
  - 全字根 → 归并：同一组变体中有一个完成就算完成。
  - 归并 → 全字根：已完成的归并组会展开为所有变体完成。
- 错题集合不会跨模式映射（错了什么就记录什么）。

### 练习模式

- **学习**：首次出现直接显示代码，视为答错；使用遗忘曲线安排复习；不显示准确率。
- **普通**：使用遗忘曲线安排复习（见下方“遗忘曲线”）。
- **复习**：不使用遗忘曲线，仅按题目顺序练习。
- **跟打**：始终显示代码，不使用遗忘曲线。
- **错题**：
  - 答错就加入错题集合，刷新前不会移除。
  - 使用遗忘曲线安排复习。
  - “错题进度”完成一轮后会清零再开始。

### 遗忘曲线

内置三段复习间隔（以“答题次数”为单位）：`2`、`5`、`10`。  
当题目达到当前阶段后，会重新排入复习队列。

## 统计与提示

- **准确率**：正确次数 / 总尝试次数。
- **进度**：已完成 / 总题数。
- **错题进度**：已完成的错题 / 错题总数（仅错题模式显示）。
- **皇冠**：每完成一轮（进度打满并清零一次，错题模式不计入），在准确率/进度下方显示 `👑`，多轮显示 `👑×N`。
- **计时器**：从首次键盘输入开始计时，键盘 5 秒无输入自动暂停。

## UI 控件

- **大小**：7 档缩放（左侧“大/小”按钮）。
- **主题**：白/黑。
- **配色**：下拉选择（Auto/One/Solarized/Nord/Catppuccin/Gruvbox/Tokyo/Rose）。
  - Auto 每推进 100 点进度自动切换一套配色。
- **界面显示**：不隐/半隐/全隐。
- 鼠标静止一段时间后自动隐藏指针。

## 数据与字体

- `index.html` 内嵌了完整字根数据（含变体与归并版本）。
- `roots*.json` / `roots*.tsv`：字根数据的源文件。
- `tigercode.pdf`：原始来源文档。
- `extracted_lines.txt`：从 PDF 提取的行文本。
- `fonts/`：用于显示 PDF 中的罕见/PUA 字形，包含：
  - `PdfSimSun` / `PdfSimSunExtB`
  - `PdfTumanPUA`
  - `PdfConsolas`
  - `PdfLXGWWenKai`

## 目录结构

- `index.html`：UI + 样式 + 逻辑 + 数据（主入口，唯一运行文件）。
- `fonts/`：嵌入字体。
- `roots.json` / `roots.tsv`：基础字根数据。
- `roots_variants.json` / `roots_variants.tsv`：包含变体的字根数据。
- `extracted_lines.txt`：PDF 提取行。
- `tigercode.pdf`：来源 PDF。
- `script.js`：历史遗留脚本（当前未被页面引用）。

## 状态说明

所有进度、错题、计时等状态均保存在内存中，刷新页面即清空。
